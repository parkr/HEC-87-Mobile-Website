var HEC={debug:function(){var args=Array.prototype.slice.call(arguments,0);console&&console.log&&console.log(args)},checkin:function(){if(document.location.pathname.search("program/view")>=0){HEC.debug("checking in.");var attr_check_in_url=$("#check_in_button span span.ui-btn-text").attr("data-check-in-url"),dasURL=attr_check_in_url&&attr_check_in_url!=""?attr_check_in_url:document.location.href.substring(0,document.location.href.search("program/view"))+"check_ins/check_in/"+document.location.href.substring(document.location.href.search("view/")+5)+".json";HEC.debug(dasURL);var ajaxSettings={url:dasURL,dataType:"json",type:"POST",error:function(jqXHR,textStatus,theErrorThrown){HEC.debug(textStatus,theErrorThrown)},success:function(data,textStatus,jqXHR){data.success?$("#check_in_button span span.ui-btn-text").html(data.message).attr("data-check-in-url",document.location.href.substring(0,document.location.href.search("program/view"))+"check_ins/undo_check_in/"+document.location.href.substring(document.location.href.search("view/")+5)+".json"):$("#check_in_button span span.ui-btn-text").html(data.message)}};$.ajax(ajaxSettings)}},hasCheckedIn:function(){if(document.location.pathname.search("program/view")>=0){HEC.debug("checking in.");var attr_check_in_url=$("#check_in_button span span.ui-btn-text").attr("data-check-in-url"),dasURL=attr_check_in_url&&attr_check_in_url!=""?attr_check_in_url:document.location.href.substring(0,document.location.href.search("program/view"))+"check_ins/has_checked_in_here/"+document.location.href.substring(document.location.href.search("view/")+5)+".json";HEC.debug(dasURL);var ajaxSettings={url:dasURL,dataType:"json",type:"POST",error:function(jqXHR,textStatus,theErrorThrown){HEC.debug(textStatus,theErrorThrown)},success:function(data,textStatus,jqXHR){data.success&&data.has_checked_in?$("#check_in_button span span.ui-btn-text").html(data.message).attr("data-check-in-url",document.location.href.substring(0,document.location.href.search("program/view"))+"check_ins/undo_check_in/"+document.location.href.substring(document.location.href.search("view/")+5)+".json"):$("#check_in_button span span.ui-btn-text").html(data.message)}};$.ajax(ajaxSettings)}}};$(document).live("pageinit",function(event){$.extend($.mobile,{ajaxEnabled:!1,ajaxLinksEnabled:!1,ajaxFormsEnabled:!1});(function(){$('[role="search"]').removeClass("ui-bar-c");$('[data-theme="c"]').removeClass("ui-bar-b").addClass("ui-bar-c")})();$("#check_in_button").on("click",HEC.checkin);HEC.hasCheckedIn()});